class Category:
    def __init__(self, category):
        self.category = category
        self.ledger = []

    def __str__(self):
        initial_deposit_amount = 0
        total = 0
        title = f"{self.category:*^30}\n"
        
        initial_deposit_amount += sum(entry['amount'] for entry in self.ledger if entry['amount'] > 0)
        initial_deposit = f"deposit {initial_deposit_amount:>22.2f}\n" 

        withdrawal = ''.join(
            f"{entry['description'][:23]:<23}{entry['amount']:>7.2f}\n" for entry in self.ledger if entry['amount']<0)

        total = f"Total: {self.get_balance():.2f}"

        return title + initial_deposit + withdrawal + total
               
    def get_balance (self):
        total = 0
        for entry in self.ledger:
            total += entry['amount']
        return total

    def check_funds(self, amount):
        return amount <= self.get_balance()
        
    def deposit(self, amount, description=''):
        self.ledger.append({'amount': amount, 'description': description}) 
    
    def withdraw(self, amount, description=''):
        if amount <= self.get_balance():
            self.ledger.append({'amount': -amount, 'description': description})
            return self.check_funds(amount)
        else: 
            return self.check_funds(amount)
    
    def transfer(self, amount, category):
        category.deposit(amount, 'Transfer from ' + self.category)
        self.withdraw(amount, 'Transfer to ' + category.category)
        return self.check_funds(amount)

def create_spend_chart(categories):
    total_spent = 0
    spent_list = []
    for category in categories:       
        amt_spent_per_category = -sum(
            entry['amount'] for entry in category.ledger if entry['amount'] < 0
            )
        total_spent += amt_spent_per_category
        spent_list.append(amt_spent_per_category)

    #compute percentages
    spent_percent_rounded_list = []
    for spending in spent_list:
        spent_percent = (spending/total_spent)*100
        spent_percent_rounded = (spent_percent // 10)*10
        spent_percent_rounded_list.append(spent_percent_rounded)
    
    #bar chart format
    chart_title = 'Percentage spent by category\n'
    chart_lines = []
    for i in range(100, -1, -10):
        chart_axis = f"{i:>3}| "
        for pct in spent_percent_rounded_list:
            chart_axis += "o  " if pct>=i else "   "
        chart_lines.append(chart_axis)
               
    dashes = '    ' + '-'*(len(categories)*3 + 1)
   
    label_lines = []
    for category in categories:
        cat_length = (len(category.category))
    for i in range(cat_length):
        label = '     '
        for category in categories:
            if i < len(category.category):
                label += category.category[i] + '  '
            else:
                label += '   '
        label_lines.append(label)

    chart = chart_title + '\n'.join(chart_lines) + '\n' + dashes + '\n' + '\n'.join(label_lines)
    print(chart)
    return(chart)
        


   

  
food = Category('Food')
food.deposit(1000, 'deposit')
food.withdraw(10.15, 'groceries')
food.withdraw(15.89, 'restaurant and more food for dessert')
clothing = Category('Clothing')
food.transfer(50, clothing)

print(food)
print(clothing)
create_spend_chart([food, clothing])
